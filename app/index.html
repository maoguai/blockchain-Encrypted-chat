<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="author" content="dzh">
        <meta name="description" content="Ethereum||Chat">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>chat</title>
        <link rel="stylesheet" href="stylesheets/app.css">
        <script src="./app.js"></script>
    </head>
    <body>
     
  <h1>Chat</h1>
  <h2>添加好友（即密钥协商）</h2>
 <input type="file" id="files" name="files[]" multiple />
<p id="list"></p>
<button id="set" onclick="App.setStatus3()">Send</button>
<output id="lists"></output>

<script>
  function fileSelect3(e) {
    e = e || window.event;

    var files = this.files;
    var p = document.getElementById('files');
     f = files[0];
    //for(var i = 0, f; f = files[i]; i++) {
        var reader = new FileReader();
        reader.onload = (function(file) {
            return function(e) {
                var div = document.createElement('div');
                div.className = "text"
                document.getElementById('list').value = e.target.result;
            };
        })(f);
        //读取文件内容
        reader.readAsText(f);
    //}
}
document.getElementById('files').addEventListener('change', fileSelect3, false);
</script>

  <!--密钥协商 -->
  <!--密钥协商 发送 -->
   <span id="status"></span>
  <br><label for="sender">To Address:</label><input type="text" id="receiver" placeholder="e.g., 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae"></input>
  <button id="send" onclick="App.sendCoin()">Send</button>
  <br><br>
   <!--密钥协商 显示-->
   <h2>申请者</h2>
   <div id='display'> </div>
   <br><br>
  <!--密钥协商 回复-->
  <button id="reply" onclick="App.keyreceive()">Receive</button>
  <label for="identity">请输入密码：</label>
  <input type="text" id="password" ></input>
  <button id="send" onclick="App.se()">保存</button>
  <br><br>
  <!--密钥协商 确定-->
  <br>回复者<br><div id='display2'> </div>
  <label for="identity">请输入密码：</label><input type="text" id="password1" ></input>
  <button type = "submit"  onclick="App.keyensure()">ensure</button>
  <br><br>
  <h1>聊天框</h1>
  <!--发送聊天-->
  <label for="sender">To Address:</label><input type="text" id="msgreceiver" placeholder="e.g., 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae"></input><br><br>
  <textarea id="msgtext" placeHolder="enter to send"></textarea>
  <button type = "submit" onclick="App.send()">send</button>
  <span id="status2"></span>
  <br><br>
  <!--查询聊天-->
   <br><br>
  <h2>历史记录</h2><div id='display3'> </div>
  <br><label for="sender">对方地址</label><input type="text" id="pastmessage" placeholder="e.g., 0x93e66d9baea28c17d9fc393b53e3fbdd76899dae"></input>
  <br><br><button id="msgsearch" onclick="App.getm()">search</button>
  <output id="psg"></output>
  <span id="status"></span>
  <br>
  <span class="hint"><strong>Hint:</strong> open the browser developer console to view any errors and warnings.</span>
</body>
</html>
    </body>
